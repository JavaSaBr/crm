
ext {
    lombok = "true"
    web = "true"
}

dependencies {
    compile project(":jcrm-dictionary-jdbc")
    compile project(":jcrm-user-jdbc")
    compile project(":jcrm-security-web")
    compile project(":jcrm-mail")
    testCompile project(path: ":jcrm-user-jdbc", configuration: "testArtifacts")
    testCompile project(path: ":jcrm-mail", configuration: "testArtifacts")
    testCompile project(":jcrm-integration-test-db")
    testCompile project(":jcrm-integration-test-web")
}

afterEvaluate {
    tasks.bootRun {
        
        def smtpUser = System.getProperty("javax.mail.username")
        def smtpPassword = System.getProperty("javax.mail.password")
        def smtpFrom = System.getProperty("javax.mail.smtp.from")
        
        main = 'com.ss.jcrm.registration.web.RegistrationApplication'
        jvmArgs = [
            "-Dserver.port=8091",
            "-Djavax.mail.username=$smtpUser",
            "-Djavax.mail.password=$smtpPassword",
            "-Djavax.mail.smtp.from=$smtpFrom"
        ]
    }
}